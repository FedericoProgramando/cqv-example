(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3814],{7484:function(e){var t,n,i,s,a,r,o,c,u,l,d,p,h,f,m,v,_,g,$,x,y;e.exports=(t="millisecond",n="second",i="minute",s="hour",a="week",r="month",o="quarter",c="year",u="date",l="Invalid Date",d=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h=function(e,t,n){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(n)+e},(m={})[f="en"]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||"th")+"]"}},v=function(e){return e instanceof x},_=function e(t,n,i){var s;if(!t)return f;if("string"==typeof t){var a=t.toLowerCase();m[a]&&(s=a),n&&(m[a]=n,s=a);var r=t.split("-");if(!s&&r.length>1)return e(r[0])}else{var o=t.name;m[o]=t,s=o}return!i&&s&&(f=s),s||!i&&f},g=function(e,t){if(v(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new x(n)},($={s:h,z:function(e){var t=-e.utcOffset(),n=Math.abs(t);return(t<=0?"+":"-")+h(Math.floor(n/60),2,"0")+":"+h(n%60,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var i=12*(n.year()-t.year())+(n.month()-t.month()),s=t.clone().add(i,r),a=n-s<0,o=t.clone().add(i+(a?-1:1),r);return+(-(i+(n-s)/(a?s-o:o-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return({M:r,y:c,w:a,d:"day",D:u,h:s,m:i,s:n,ms:t,Q:o})[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}}).l=_,$.i=v,$.w=function(e,t){return g(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})},y=(x=function(){function e(e){this.$L=_(e.locale,null,!0),this.parse(e)}var h=e.prototype;return h.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if($.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(d);if(i){var s=i[2]-1||0,a=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],s,i[3]||1,i[4]||0,i[5]||0,i[6]||0,a)):new Date(i[1],s,i[3]||1,i[4]||0,i[5]||0,i[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},h.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},h.$utils=function(){return $},h.isValid=function(){return this.$d.toString()!==l},h.isSame=function(e,t){var n=g(e);return this.startOf(t)<=n&&n<=this.endOf(t)},h.isAfter=function(e,t){return g(e)<this.startOf(t)},h.isBefore=function(e,t){return this.endOf(t)<g(e)},h.$g=function(e,t,n){return $.u(e)?this[t]:this.set(n,e)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(e,t){var o=this,l=!!$.u(t)||t,d=$.p(e),p=function(e,t){var n=$.w(o.$u?Date.UTC(o.$y,t,e):new Date(o.$y,t,e),o);return l?n:n.endOf("day")},h=function(e,t){return $.w(o.toDate()[e].apply(o.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(t)),o)},f=this.$W,m=this.$M,v=this.$D,_="set"+(this.$u?"UTC":"");switch(d){case c:return l?p(1,0):p(31,11);case r:return l?p(1,m):p(0,m+1);case a:var g=this.$locale().weekStart||0,x=(f<g?f+7:f)-g;return p(l?v-x:v+(6-x),m);case"day":case u:return h(_+"Hours",0);case s:return h(_+"Minutes",1);case i:return h(_+"Seconds",2);case n:return h(_+"Milliseconds",3);default:return this.clone()}},h.endOf=function(e){return this.startOf(e,!1)},h.$set=function(e,a){var o,l=$.p(e),d="set"+(this.$u?"UTC":""),p=((o={}).day=d+"Date",o[u]=d+"Date",o[r]=d+"Month",o[c]=d+"FullYear",o[s]=d+"Hours",o[i]=d+"Minutes",o[n]=d+"Seconds",o[t]=d+"Milliseconds",o)[l],h="day"===l?this.$D+(a-this.$W):a;if(l===r||l===c){var f=this.clone().set(u,1);f.$d[p](h),f.init(),this.$d=f.set(u,Math.min(this.$D,f.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},h.set=function(e,t){return this.clone().$set(e,t)},h.get=function(e){return this[$.p(e)]()},h.add=function(e,t){var o,u=this;e=Number(e);var l=$.p(t),d=function(t){var n=g(u);return $.w(n.date(n.date()+Math.round(t*e)),u)};if(l===r)return this.set(r,this.$M+e);if(l===c)return this.set(c,this.$y+e);if("day"===l)return d(1);if(l===a)return d(7);var p=((o={})[i]=6e4,o[s]=36e5,o[n]=1e3,o)[l]||1,h=this.$d.getTime()+e*p;return $.w(h,this)},h.subtract=function(e,t){return this.add(-1*e,t)},h.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var i=e||"YYYY-MM-DDTHH:mm:ssZ",s=$.z(this),a=this.$H,r=this.$m,o=this.$M,c=n.weekdays,u=n.months,d=function(e,n,s,a){return e&&(e[n]||e(t,i))||s[n].slice(0,a)},h=function(e){return $.s(a%12||12,e,"0")},f=n.meridiem||function(e,t,n){var i=e<12?"AM":"PM";return n?i.toLowerCase():i},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:$.s(o+1,2,"0"),MMM:d(n.monthsShort,o,u,3),MMMM:d(u,o),D:this.$D,DD:$.s(this.$D,2,"0"),d:String(this.$W),dd:d(n.weekdaysMin,this.$W,c,2),ddd:d(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(a),HH:$.s(a,2,"0"),h:h(1),hh:h(2),a:f(a,r,!0),A:f(a,r,!1),m:String(r),mm:$.s(r,2,"0"),s:String(this.$s),ss:$.s(this.$s,2,"0"),SSS:$.s(this.$ms,3,"0"),Z:s};return i.replace(p,function(e,t){return t||m[e]||s.replace(":","")})},h.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},h.diff=function(e,t,u){var l,d=$.p(t),p=g(e),h=(p.utcOffset()-this.utcOffset())*6e4,f=this-p,m=$.m(this,p);return m=((l={})[c]=m/12,l[r]=m,l[o]=m/3,l[a]=(f-h)/6048e5,l.day=(f-h)/864e5,l[s]=f/36e5,l[i]=f/6e4,l[n]=f/1e3,l)[d]||f,u?m:$.a(m)},h.daysInMonth=function(){return this.endOf(r).$D},h.$locale=function(){return m[this.$L]},h.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),i=_(e,t,!0);return i&&(n.$L=i),n},h.clone=function(){return $.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},e}()).prototype,g.prototype=y,[["$ms",t],["$s",n],["$m",i],["$H",s],["$W","day"],["$M",r],["$y",c],["$D",u]].forEach(function(e){y[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),g.extend=function(e,t){return e.$i||(e(t,x,g),e.$i=!0),g},g.locale=_,g.isDayjs=v,g.unix=function(e){return g(1e3*e)},g.en=m[f],g.Ls=m,g.p={},g)},4443:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[username]/posts",function(){return n(275)}])},275:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return Z}});var i=n(5893),s=n(7294),a=n(1664),r=n.n(a),o=n(6228),c=n(4942),u=n(5682),l=n(9944),d=n(7125),p=n(240),h=n(8800),f=n(8401),m=n(2021),v=n(5627),_=n(2207),g=n(602),$=n(6064),x=n(3630),y=n(6154),M=n(4184),j=n.n(M),S=n(7484),w=n.n(S),b=n(2146),D=n.n(b),C=n(7814),N=n(9417);let k=()=>{var e,t,n,a,o,c;let{setShow:u,user:l}=(0,s.useContext)(g.Z),d=w()().diff(w()(null==l?void 0:null===(e=l.identification)||void 0===e?void 0:e.dateBirth),"year");return(0,i.jsxs)(i.Fragment,{children:[(null==l?void 0:null===(t=l.identification)||void 0===t?void 0:t.manualRevision)&&(0,i.jsx)("div",{className:D().textInformation,children:"Tu cuenta no pudo ser validada automaticamente, est\xe1 en revisi\xf3n manual."}),(!(null==l?void 0:l.identification)||(null==l?void 0:null===(n=l.identification)||void 0===n?void 0:n.triesRekognition)<3||!(null==l?void 0:null===(a=l.identification)||void 0===a?void 0:a.triesRekognition))&&!(null==l?void 0:null===(o=l.identification)||void 0===o?void 0:o.valid)&&(0,i.jsxs)("div",{className:D().textInformation,children:["Para poder subir publicaciones a tu cuenta primero debes pasar por un proceso de validaci\xf3n de identidad, haz click ",(0,i.jsx)(r(),{href:"/validate_identity",children:"aqu\xed"})]}),(null==l?void 0:l.identification)&&d<18&&(0,i.jsx)("div",{className:D().textInformation,children:"No cumples con la edad requerida por la plataforma para poder subir publicaciones."}),!l.paymentMercadoPagoValid&&d>=18&&(0,i.jsxs)("div",{className:D().textInformation,children:["Necesitas enlazar una cuenta de MercadoPago en la secci\xf3n de"," ",(0,i.jsx)(r(),{href:"/my_account?tab=payment#payment",children:"Pagos"})," ","para poder subir publicaciones."]}),(null==l?void 0:l.identification)&&!l.documentValid&&(0,i.jsxs)("div",{className:D().textInformation,children:["Tu n\xfamero de DNI no concuerda con el de tu cuenta de MercadoPago. Para seguir subiendo publicaciones debes enlazar una nueva cuenta de MercadoPago v\xe1lida puedes ir a la secci\xf3n de"," ",(0,i.jsx)(r(),{href:"/my_account?tab=payment#payment",children:"Pagos"})]}),l.paymentMercadoPagoValid&&d>=18&&l.documentValid&&(null==l?void 0:null===(c=l.identification)||void 0===c?void 0:c.valid)&&(0,i.jsx)("section",{className:D().addButton,children:(0,i.jsx)("img",{src:"https://cdn.cafecito.app/imgs/icon_add.svg",onClick:()=>u("block"),alt:""})})]})},P=e=>{let{post:t,isUserEdit:n}=e,a=(0,s.useRef)(null),[r,o]=(0,s.useState)(!1),c=()=>o(!0);return(0,s.useEffect)(()=>{let e=a.current;e&&(e.complete?c():(e.addEventListener("load",c),e.removeEventListener("load",c)))},[a]),(0,i.jsxs)("div",{className:D().imageWrapper,children:[(0,i.jsx)("div",{style:{display:r?"none":"block"},className:D().imagePlaceholder}),(0,i.jsx)("img",{ref:a,style:{display:r?"block":"none"},className:D().image,src:t.image,alt:t.title}),t.private&&!n&&!t.unlock&&(0,i.jsx)("div",{className:D().private,style:{display:r?"flex":"none"},children:(0,i.jsxs)("div",{className:D().privateWrapper,children:[(0,i.jsx)("img",{src:"https://cdn.cafecito.app/imgs/cafecito-lock.svg"}),(0,i.jsx)("span",{children:"Desbloquear contenido"})]})})]})},T=e=>{var t;let{username:n,post:a,loadPost:o}=e,c=(null==a?void 0:null===(t=a.description)||void 0===t?void 0:t.length)>=400,{isUserEdit:u}=(0,s.useContext)(g.Z);return(0,i.jsxs)("article",{className:D().postWrapper,children:[(0,i.jsxs)(r(),{href:"/".concat(n,"/post/").concat(a.pathUrl),onClick:e=>{e.preventDefault(),o(a)},children:[(0,i.jsxs)("h2",{children:[a.private&&(0,i.jsx)(C.G,{className:D().spinner,icon:N.byT,width:"12"})," ",a.title]}),a.image&&(0,i.jsx)(P,{post:a,isUserEdit:u}),a.description&&(0,i.jsxs)("section",{className:D().description,style:{height:c?"200px":"auto"},children:[a.description,c&&(0,i.jsx)("div",{className:D().shadowShowMore})]})]}),a.description&&c&&(0,i.jsx)("div",{className:D().seeMore,onClick:()=>{o(a,!0)},children:"Ver m\xe1s"})]})},W=e=>{var t,n;let{user:a,plans:$,posts:M,userAgent:S,query:w,userRedux:b,isAdult:C,hasGallery:N,hasPost:P}=e;if(!a)return(0,i.jsx)(_.Z,{});let W=(0,x.Z)(S).phone,O=(null==b?void 0:b.username)===(null==w?void 0:w.username),[Z,E]=(0,s.useState)([...M]),[H,I]=(0,s.useState)("none"),[Y,A]=(0,s.useState)("none"),[L,z]=(0,s.useState)(!1),[V,U]=(0,s.useState)(0),[q,F]=(0,s.useState)(0),[B,J]=(0,s.useState)(!1),[R,G]=(0,s.useState)(!1),[X,Q]=(0,s.useState)(!C&&(null==b?void 0:b._id)!=a._id&&a.nsfw),[K,ee]=(0,s.useState)(!1),[et,en]=(0,s.useState)(!1),ei=async(e,t)=>{if(!e.private||O||(null==b?void 0:b._id)){e.private&&!e.unlock&&(null==b?void 0:b._id)?en(!0):A("block");let n=await y.Z.get("".concat("https://cafecito.app/api","/user/post/").concat(e._id),{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}});z({...n.data,seeMoreActive:t})}else ee(!0)},es=async()=>{G(!0);let e=await y.Z.get("".concat("https://cafecito.app/api","/user/posts/").concat(a._id,"?page=").concat(V,"&offset=").concat(q),{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}});G(!1),e.data.length?E([...Z,...e.data]):J(!0),e.data.length<10&&(J(!0),E([...Z,...e.data]))},ea=async(e,t)=>{if(t){let t=[...Z];t.unshift(e),E(t),F(e=>e+1)}else E(t=>t.map(t=>(t._id==e._id&&(t={...e}),t)))},er=e=>{let t=Z.filter(t=>{if(t._id!==e._id)return t});E(t)},eo=(e,t)=>{"openModalAdultContent"==t&&y.Z.post("".concat("https://cafecito.app/api","/see_nsfw"),{},{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}}),Q(!1)};(0,s.useEffect)(()=>{0!==V&&es()},[V]);let ec=Z.some(e=>!0===e.private);return(0,i.jsxs)(g.e,{value:{post:L,plans:$,setPost:z,show:H,setShow:I,showPost:Y,setShowPost:A,user:a,reloadPost:ea,removePost:er,isUserEdit:O,setShowBuyPlan:en},children:[(0,i.jsxs)("div",{className:j()(X&&D().blur),children:[(0,i.jsx)(o.Z,{user:a,title:"Publicaciones de ".concat(a.name," | Cafecito"),url:"".concat("https://cafecito.app","/").concat(a.username,"/posts")}),(0,i.jsx)(c.Z,{}),(0,i.jsx)(u.Z,{user:a,isUserEdit:O,userLogged:b}),(0,i.jsxs)("div",{className:D().postsWrapper,children:[(0,i.jsx)(f.Z,{menu:"posts",username:a.username,hide:{plans:(null==$?void 0:$.length)===0&&!O,gallery:!N&&!O,posts:!P&&!O}}),W&&!O&&!ec&&(0,i.jsx)(l.Z,{isMobile:W,price:a.priceCoffee,username:w.username,user:a,hasPlans:(null==$?void 0:$.length)>0}),!O&&(0,i.jsx)(d.Z,{show:et,isMobile:W,username:w.username,user:a}),!W&&!O&&!ec&&(0,i.jsxs)(r(),{href:"/".concat(a.username),className:D().sendToProfile,children:[(0,i.jsx)("img",{src:"https://cdn.cafecito.app/imgs/cafecito_logo_white.svg",alt:""}),(null==a?void 0:null===(t=a.texts)||void 0===t?void 0:t.button_mobile)?null==a?void 0:null===(n=a.texts)||void 0===n?void 0:n.button_mobile:"Invitame un Cafecito"]}),O&&(0,i.jsx)(k,{}),(0,i.jsx)("section",{className:D().postsContainer,children:Z.map(e=>(0,i.jsx)(T,{post:e,username:a.username,loadPost:ei},e._id))}),Z.length>=10&&!B&&(0,i.jsx)("button",{className:D().loadMorePosts,disabled:R,onClick:async()=>{U(V+1)},children:R?"Cargando":"Cargar m\xe1s publicaciones"})]}),(0,i.jsx)(p.Z,{}),(0,i.jsx)(h.Z,{})]}),(0,i.jsx)(v.Z,{eventModal:ee,openModal:K,redirect:"/".concat(a.username,"/posts"),userAgent:S}),(0,i.jsx)(m.Z,{openModal:X,nameModal:"openModalAdultContent",openModalCreateEvent:eo})]})},O=e=>{let{user:t}=e;return{userRedux:t}};var Z=!0;t.default=(0,$.$j)(O)(W)},2146:function(e){e.exports={blur:"posts_blur__g1_rj",postsWrapper:"posts_postsWrapper__n1ETS",postsContainer:"posts_postsContainer__cWntt",postWrapper:"posts_postWrapper___YuOo",imageWrapper:"posts_imageWrapper__Yqj3g",imagePlaceholder:"posts_imagePlaceholder__2iSXW",placeHolderShimmer:"posts_placeHolderShimmer__o74et",private:"posts_private__kz5_g",privateWrapper:"posts_privateWrapper__DyzbW",planType:"posts_planType__uG1Ce",lock:"posts_lock__kwq8o",image:"posts_image__7Pftb",description:"posts_description__PWiz_",shadowShowMore:"posts_shadowShowMore__ZvAWD",seeMore:"posts_seeMore__vCxUL",addButton:"posts_addButton__EFrH1",textInformation:"posts_textInformation__ZHVGz",loadMorePosts:"posts_loadMorePosts__5Dhrv",sendToProfile:"posts_sendToProfile__L1EEV"}}},function(e){e.O(0,[4976,7948,8764,7758,4193,8005,5223,4942,2813,9944,7125,3133,9774,2888,179],function(){return e(e.s=4443)}),_N_E=e.O()}]);