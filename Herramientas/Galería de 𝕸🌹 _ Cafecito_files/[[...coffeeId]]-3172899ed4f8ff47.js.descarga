(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9034],{9743:function(e,o,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[username]/[[...coffeeId]]",function(){return t(9441)}])},2495:function(e,o,t){"use strict";var n=t(5893);t(7294);var a=t(1664),l=t.n(a),i=t(1211),s=t.n(i),r=t(4184),c=t.n(r);let d=e=>{let{bottom:o}=e;return(0,n.jsxs)("footer",{className:c()(s().footerContainer,o&&s().footerInBottom),children:[(0,n.jsxs)("section",{className:s().leftSection,children:["\xa9 2023 Cafecito."," ",(0,n.jsxs)("div",{children:[(0,n.jsx)(l(),{href:"/faq",children:"Preguntas frecuentes"}),(0,n.jsx)(l(),{href:"/terms",children:"T\xe9rminos y condiciones"}),(0,n.jsx)(l(),{href:"/privacy_policies",children:"Pol\xedtica de privacidad"})]})]}),(0,n.jsxs)("section",{className:s().socialNetworksIcons,children:[(0,n.jsx)("a",{href:"https://twitter.com/cafecito_app",target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)("img",{src:"https://cdn.cafecito.app/imgs/icon_twitter.svg",alt:"",width:"24px",height:"23px"})}),(0,n.jsx)("a",{href:"https://www.instagram.com/cafecito_app",target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)("img",{src:"https://cdn.cafecito.app/imgs/icon_instagram.svg",alt:"",width:"24px",height:"23px"})})]})]})};o.Z=d},9441:function(e,o,t){"use strict";t.r(o),t.d(o,{__N_SSP:function(){return eP},default:function(){return eB}});var n=t(5893),a=t(7294),l=t(1664),i=t.n(l),s=t(5682),r=t(4942),c=t(9944),d=t(2021),u=t(8401),p=t(2495);let h=a.createContext([]),f=h.Provider;var m=t(6154),v=t(1243),_=t.n(v);let g=e=>{var o,t;let{children:l}=e,{user:f,isMobile:v,isUserEdit:g,hideButtonCoffee:x,isAdult:j,plans:w,hasGallery:C,hasPost:b,menuSelected:N="home",footerMobile:y=!1,userRedux:k}=(0,a.useContext)(h),[S,G]=(0,a.useState)(!j&&!g&&f.nsfw),M=(e,o)=>{"openModalAdultContent"==o&&m.Z.post("".concat("https://cafecito.app/api","/see_nsfw"),{},{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}}),G(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:S?_().blur:null,children:[(0,n.jsx)(r.Z,{}),(0,n.jsx)(s.Z,{user:f,isUserEdit:g,userLogged:k}),(0,n.jsx)(u.Z,{menu:N,username:f.username,hide:{plans:(null==w?void 0:w.length)===0&&!g,gallery:!C&&!g,posts:!b&&!g}}),v&&!g&&!x&&(0,n.jsx)(c.Z,{isMobile:v,price:f.priceCoffee,username:f.username,user:f}),!v&&!g&&!x&&(0,n.jsxs)(i(),{href:"/".concat(f.username),className:_().sendToProfile,children:[(0,n.jsx)("img",{src:"https://cdn.cafecito.app/imgs/cafecito_logo_white.svg",alt:""}),(null==f?void 0:null===(o=f.texts)||void 0===o?void 0:o.button_mobile)?null==f?void 0:null===(t=f.texts)||void 0===t?void 0:t.button_mobile:"Invitame un Cafecito"]}),l,(0,n.jsx)(p.Z,{bottom:y})]}),(0,n.jsx)(d.Z,{openModal:S,nameModal:"openModalAdultContent",openModalCreateEvent:M})]})};var x=t(7424),j=t.n(x),w=t(4184),C=t.n(w),b=t(6064),N=t(7814),y=t(9417);let k=(0,a.createContext)({}),S=e=>{let{user:o,children:t,isUserLogged:l}=e,[i,s]=(0,a.useState)(!1);return(0,n.jsx)(k.Provider,{value:{show:i,setShow:s,user:o,isUserLogged:l},children:t})},G=()=>{let{setShow:e}=(0,a.useContext)(k);return(0,n.jsxs)("div",{className:j().setGoal,children:[(0,n.jsx)("span",{children:"Agregar objetivo (opcional)"}),(0,n.jsx)("button",{onClick:()=>e("block"),children:"Crear"})]})},M=()=>(0,n.jsx)(N.G,{className:j().spinner,icon:y.LM3,width:"20"}),P=()=>{var e,o,t,l,i,s,r,c;let{setShow:d,user:u,isUserLogged:p}=(0,a.useContext)(k),h=Math.min(Math.round((null==u?void 0:null===(e=u.goal)||void 0===e?void 0:e.collectedGoal)*100/(null==u?void 0:null===(o=u.goal)||void 0===o?void 0:o.amountGoal)),100);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("header",{children:[(0,n.jsx)("h4",{children:null==u?void 0:null===(t=u.goal)||void 0===t?void 0:t.title}),p&&(0,n.jsx)("img",{src:"https://cdn.cafecito.app/imgs/icon_pencil.svg",alt:"",onClick:()=>d("block")})]}),(0,n.jsx)("div",{className:j().progressBar,children:(0,n.jsx)("span",{className:j().progressComplete,style:{width:"".concat(h,"%")}})}),(0,n.jsx)("div",{className:j().goalAmount,children:(null==u?void 0:null===(l=u.goal)||void 0===l?void 0:l.typeGoal)&&(null==u?void 0:null===(i=u.goal)||void 0===i?void 0:i.typeGoal)!==1?"".concat(h,"% del objetivo de ").concat(null==u?void 0:null===(r=u.goal)||void 0===r?void 0:r.amountGoal," Cafecitos"):"".concat(h,"% del objetivo de $").concat(null==u?void 0:null===(s=u.goal)||void 0===s?void 0:s.amountGoal)}),(0,n.jsx)("article",{children:null==u?void 0:null===(c=u.goal)||void 0===c?void 0:c.description})]})},B=e=>{let{name:o,title:t,placeholder:a,maxLength:l,handleInputChange:i,type:s="text",defaultValue:r,err:c,showError:d}=e;return(0,n.jsxs)("section",{className:C()(j().groupInput,d[o]&&j().showError),children:[(0,n.jsx)("label",{htmlFor:o,children:t}),(0,n.jsx)("input",{type:s,id:o,name:o,placeholder:a||t,maxLength:l,onChange:i,defaultValue:r}),d[o]&&c&&(0,n.jsx)("span",{className:j().error,children:c})]})},T=()=>{var e,o,t,l,i;let{show:s,setShow:r,user:c}=(0,a.useContext)(k),[d,u]=(0,a.useState)({title:(null==c?void 0:null===(e=c.goal)||void 0===e?void 0:e.title)||"",description:(null==c?void 0:null===(o=c.goal)||void 0===o?void 0:o.description)||"",amountGoal:(null==c?void 0:null===(t=c.goal)||void 0===t?void 0:t.amountGoal)||"",collectedGoal:(null==c?void 0:null===(l=c.goal)||void 0===l?void 0:l.collectedGoal)||0,typeGoal:(null==c?void 0:null===(i=c.goal)||void 0===i?void 0:i.typeGoal)||1}),[p,h]=(0,a.useState)({title:!1,amountGoal:!1,collectedGoal:!1}),[f,v]=(0,a.useState)(!1),[_,g]=(0,a.useState)(!1),[x,w]=(0,a.useState)(!1),C=e=>{u({...d,[e.target.name]:e.target.value}),h({...p,[e.target.name]:!1})},b=async()=>{let e={};""===d.title&&(e.title=!0),(""===d.amountGoal||d.amountGoal<=0)&&(e.amountGoal=!0),(""===d.collectedGoal||d.collectedGoal<0)&&(e.collectedGoal=!0),h({...p,...e}),Object.keys(e).length||_||(g(!0),await m.Z.post("".concat("https://cafecito.app/api","/user/create_goal"),d,{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}}),window.location.reload())},N=async()=>{if(!f)return v(!0);_||(w(!0),await m.Z.delete("".concat("https://cafecito.app/api","/user/delete_goal"),{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}}),window.location.reload())};return(0,n.jsxs)("section",{className:j().modalContainer,style:{display:s},children:[(0,n.jsxs)("div",{className:j().modalWrapper,children:[(0,n.jsxs)("header",{children:[(0,n.jsx)("h5",{children:"Objetivo"}),(0,n.jsx)("img",{src:"https://cdn.cafecito.app/imgs/icon_cross.svg",alt:"",width:"16px",height:"16px",onClick:()=>r("none")})]}),(0,n.jsx)(B,{name:"title",title:"T\xedtulo",maxLength:"80",err:"Debes ingresar un t\xedtulo",showError:p,handleInputChange:C,defaultValue:d.title}),(0,n.jsxs)("section",{className:j().groupInput,children:[(0,n.jsx)("label",{htmlFor:"description",children:"Descripci\xf3n"}),(0,n.jsx)("textarea",{id:"description",name:"description",placeholder:"Descripci\xf3n",maxLength:"500",onChange:C,defaultValue:d.description})]}),(0,n.jsxs)("section",{className:j().groupInput,children:[(0,n.jsxs)("label",{className:j().wrapperRadioButton,children:["Objetivo en pesos",(0,n.jsx)("input",{type:"radio",name:"typeGoal",checked:1===d.typeGoal,onChange:()=>{u({...d,typeGoal:1})}}),(0,n.jsx)("span",{className:j().checkmark})]}),(0,n.jsxs)("label",{className:j().wrapperRadioButton,children:["Objetivo en Cafecitos",(0,n.jsx)("input",{type:"radio",name:"typeGoal",checked:2===d.typeGoal,onChange:()=>{u({...d,typeGoal:2})}}),(0,n.jsx)("span",{className:j().checkmark})]})]}),(0,n.jsx)(B,{name:"amountGoal",title:1===d.typeGoal?"Objetivo en pesos (solo monto a recaudar)":"Objetivo en Cafecitos (total a juntar)",placeholder:"1000",err:"Debes ingresar un monto mayor a 0",type:"number",showError:p,handleInputChange:C,defaultValue:d.amountGoal}),(0,n.jsx)(B,{name:"collectedGoal",title:"Monto inicial",placeholder:"0",err:"Debes ingresar un monto o dejarlo en 0",type:"number",showError:p,handleInputChange:C,defaultValue:d.collectedGoal}),(0,n.jsxs)("div",{className:j().wrapperButtons,children:[(0,n.jsx)("section",{className:j().groupButton,children:(0,n.jsx)("button",{className:j().deleteButton,onClick:N,children:x?(0,n.jsx)(M,{}):f?"Confirmar borrado":"Borrar"})}),f?(0,n.jsx)("section",{className:j().groupButton,children:(0,n.jsx)("button",{className:j().cancelButton,onClick:()=>v(!1),children:"Cancelar"})}):(0,n.jsx)("section",{className:j().groupButton,children:(0,n.jsx)("button",{onClick:b,children:_?(0,n.jsx)(M,{}):(null==c?void 0:c.goal)?"Guardar":"Crear"})})]})]}),(0,n.jsx)("div",{className:j().modalBackground,onClick:()=>r("none")})]})},D=e=>{let{user:o,userSession:t}=e,a=t&&(null==t?void 0:t._id)==(null==o?void 0:o._id);return(null==o?void 0:o.goal)||a?(0,n.jsx)(S,{user:o,isUserLogged:a,children:(0,n.jsxs)("section",{className:j().goalContainer,children:[(0,n.jsx)("div",{className:j().goalWrapper,children:(null==o?void 0:o.goal)?(0,n.jsx)(P,{}):(0,n.jsx)(G,{})}),(0,n.jsx)(T,{})]})}):null},A=e=>{let{user:o}=e;return{userSession:o}};var E=(0,b.$j)(A)(D),Z=t(8760),I=t.n(Z),W=t(7484),L=t.n(W),O=t(9252),F=t(6265);O.Z.addLocale(F.Z),L().locale("es");let q=new O.Z("es-AR"),H=(0,a.createContext)({}),R=e=>{let{children:o,coffee:t,changeCoffee:l,setShare:i,isAdmin:s}=e,[r,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)("");return(0,n.jsx)(H.Provider,{value:{coffee:t,isOpenTextInput:r,setIsOpenTextInput:c,answer:d,setAnswer:u,changeCoffee:l,setShare:i,isAdmin:s},children:o})},V=()=>{let{answer:e,coffee:o,setAnswer:t,setIsOpenTextInput:l,changeCoffee:i}=(0,a.useContext)(H),s=async()=>{e.length&&(t(""),l(!1),await m.Z.post("".concat("https://cafecito.app/api","/send_answer"),{answer:e,idCoffee:o._id},{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}}),o.answer=e,i(o))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("textarea",{placeholder:"Respuesta",value:e,onChange:e=>{t(e.target.value)}}),(0,n.jsx)("button",{onClick:s,children:o.answer?"Editar":"Responder"})]})},z=()=>{let{coffee:e,setIsOpenTextInput:o,setAnswer:t,changeCoffee:l}=(0,a.useContext)(H),i=()=>{o(!0),t(e.answer||"")},s=async()=>{let o=window.confirm(e.deleted?"\xbfEst\xe1s seguro que quer\xe9s volver visible el mensaje?":"\xbfEst\xe1s seguro que quer\xe9s ocultar el mensaje?");o&&(await m.Z.post("".concat("https://cafecito.app/api","/delete_coffee"),{idCoffee:e._id,status:!e.deleted},{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}}),e.deleted=!e.deleted,l(e))};return(0,n.jsxs)("div",{className:I().buttons,children:[(0,n.jsx)("img",{src:"https://cdn.cafecito.app/imgs/icon_pencil.svg",alt:"",height:"24px",onClick:i}),e.deleted?(0,n.jsx)("img",{src:"https://cdn.cafecito.app/imgs/icon_eye.svg",alt:"",height:"24px",onClick:s}):(0,n.jsx)("img",{src:"https://cdn.cafecito.app/imgs/icon_trash.svg",alt:"",height:"24px",onClick:s})]})},K=()=>{let{coffee:e}=(0,a.useContext)(H);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:I().containerNameHeader,children:[e.name&&(0,n.jsx)("div",{className:I().name,children:e.name}),(0,n.jsx)("div",{className:C()(I().countCoffees,!e.name&&I().countCoffeesWithoutName),children:"Te ".concat(e.name?"compr\xf3":"compraron"," ").concat(e.countCoffees," ").concat(e.countCoffees>1?"cafecitos":"cafecito")})]}),(0,n.jsx)("div",{className:I().timeAgo,children:q.format(new Date(e.createdAt))})]})},U=()=>{let{setShare:e,coffee:o}=(0,a.useContext)(H);return(0,n.jsx)("img",{src:"https://cdn.cafecito.app/imgs/icon_share.svg",alt:"",height:"24px",className:I().shareIcon,onClick:()=>{e(o)}})},X=()=>{let{isAdmin:e,isOpenTextInput:o}=(0,a.useContext)(H);return(0,n.jsx)(n.Fragment,{children:e?o?(0,n.jsx)(V,{}):(0,n.jsx)(z,{}):null})},J=()=>{let{coffee:e,isOpenTextInput:o}=(0,a.useContext)(H);return(0,n.jsx)(n.Fragment,{children:e.answer&&!o?(0,n.jsx)("div",{className:I().answer,children:e.answer}):null})},Q=e=>{let{setShare:o,coffee:t,isAdmin:a,changeCoffee:l}=e;return(0,n.jsx)(R,{coffee:t,changeCoffee:l,setShare:o,isAdmin:a,children:(0,n.jsx)("section",{className:I().coffeeContainer,children:(0,n.jsxs)("div",{className:I().coffee,children:[(0,n.jsx)(U,{}),(0,n.jsxs)("div",{className:I().q,children:[(0,n.jsx)(K,{}),t.contact&&(0,n.jsxs)("span",{className:I().text,children:[(0,n.jsx)("strong",{children:"Contacto:"})," ",t.contact]}),t.message&&(0,n.jsx)("span",{className:I().text,children:t.message})]}),(0,n.jsx)(J,{}),(0,n.jsx)(X,{})]})})})};var Y=t(5573),$=t.n(Y),ee=t(3787),eo=t.n(ee),et=t(5905),en=JSON.parse('{"0":"art","1":"craft","2":"blog","3":"science","4":"film","5":"comic","6":"food","7":"community","8":"cosplay","9":"money","10":"design","11":"education","12":"writing","13":"lifestyle","14":"photography","15":"hardware","16":"game","17":"fashion","18":"music","19":"localbusiness","20":"news","21":"ong","22":"other","23":"movie","24":"journalism","25":"paint","26":"podcast","27":"socialnetwork","28":"healthy","29":"software","30":"streaming","31":"teather","32":"sport"}'),ea=t(3024),el=t(4048),ei=t.n(el);eo().extension("targetlink",function(){return[{type:"lang",regex:/\[((?:\[[^\]]*]|[^\[\]])*)]\([ \t]*<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\4[ \t]*)?\)/g,replace:function(e,o,t,n,a,l,i,s){let r='<a href="'+t+'"';return void 0!==l&&""!==l&&null!==l&&(l=l.replace(/"/g,"&quot;"),r+=' title="'+(l=eo().helper.escapeCharacters(l,"*_",!1))+'"'),r+=' target="_blank" rel="noopener noreferrer nofollow">'+o+"</a>"}}]});let es=new(eo()).Converter({extensions:["targetlink"]}),er=e=>{var o,t,l,s,r,c,d,u,p,h,f,m;let{user:v,userSession:_,handleShowMore:g,plans:x}=e,j=_&&(null==_?void 0:_._id)==(null==v?void 0:v._id),[w,C]=(0,a.useState)(!1),{description:b,categories:k,countCoffees:S,countPlanBuyers:G}=v,M=!1;(null==v?void 0:v.socialNetwork)&&Object.keys(null==v?void 0:v.socialNetwork).map(e=>{let o=null==v?void 0:v.socialNetwork[e];o&&(M=!0)});let P=(null==b?void 0:b.length)>=80;return(0,n.jsx)("section",{className:ei().postContainer,children:(0,n.jsxs)("div",{className:ei().wrapperPost,children:[b&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h3",{className:ei().titleDescription,children:"Descripci\xf3n"}),(0,n.jsxs)("section",{className:ei().containerDescription,style:{height:!w&&P?"100px":"auto"},children:[(0,n.jsx)("div",{className:ei().post,style:{marginBottom:!w&&P?0:"20px"},dangerouslySetInnerHTML:{__html:es.makeHtml($()(b).replace(/&gt;/g,">"))}}),!w&&P&&(0,n.jsx)("div",{className:ei().shadowShowMore})]}),!w&&P&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:ei().showMore,onClick:()=>{C(!0),g()},children:"Ver m\xe1s"})})]}),M&&(0,n.jsxs)("div",{className:ei().socialNetworks,children:[(null==v?void 0:null===(o=v.socialNetwork)||void 0===o?void 0:o.twitter)&&(0,n.jsxs)("a",{href:null==v?void 0:null===(t=v.socialNetwork)||void 0===t?void 0:t.twitter,target:"_blank",rel:"noopener noreferrer nofollow",className:ei().boxNetwork,children:[(0,n.jsx)(N.G,{icon:ea.mdU,width:"20"})," "]}),(null==v?void 0:null===(l=v.socialNetwork)||void 0===l?void 0:l.facebook)&&(0,n.jsxs)("a",{href:null==v?void 0:null===(s=v.socialNetwork)||void 0===s?void 0:s.facebook,target:"_blank",rel:"noopener noreferrer nofollow",className:ei().boxNetwork,children:[(0,n.jsx)(N.G,{icon:ea.pZl,width:"20"})," "]}),(null==v?void 0:null===(r=v.socialNetwork)||void 0===r?void 0:r.instagram)&&(0,n.jsxs)("a",{href:null==v?void 0:null===(c=v.socialNetwork)||void 0===c?void 0:c.instagram,target:"_blank",rel:"noopener noreferrer nofollow",className:ei().boxNetwork,children:[(0,n.jsx)(N.G,{icon:ea.Zzi,width:"20"})," "]}),(null==v?void 0:null===(d=v.socialNetwork)||void 0===d?void 0:d.youtube)&&(0,n.jsxs)("a",{href:null==v?void 0:null===(u=v.socialNetwork)||void 0===u?void 0:u.youtube,target:"_blank",rel:"noopener noreferrer nofollow",className:ei().boxNetwork,children:[(0,n.jsx)(N.G,{icon:ea.opf,width:"20"})," "]}),(null==v?void 0:null===(p=v.socialNetwork)||void 0===p?void 0:p.twitch)&&(0,n.jsxs)("a",{href:null==v?void 0:null===(h=v.socialNetwork)||void 0===h?void 0:h.twitch,target:"_blank",rel:"noopener noreferrer nofollow",className:ei().boxNetwork,children:[(0,n.jsx)(N.G,{icon:ea.z0T,width:"20"})," "]}),(null==v?void 0:null===(f=v.socialNetwork)||void 0===f?void 0:f.page)&&(0,n.jsxs)("a",{href:null==v?void 0:null===(m=v.socialNetwork)||void 0===m?void 0:m.page,target:"_blank",rel:"noopener noreferrer nofollow",className:ei().boxNetwork,children:[(0,n.jsx)(N.G,{icon:y.nNP,width:"20"})," "]})]}),k&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("ul",{className:ei().categories,children:[k.map((e,o)=>(0,n.jsx)("li",{children:(0,n.jsx)(i(),{href:"/explore/".concat(en[e]),children:et[e]})},o)),j&&(0,n.jsx)("li",{className:ei().editCategories,children:(0,n.jsx)(i(),{href:"/choose_categories",children:(0,n.jsx)("img",{src:"https://cdn.cafecito.app/imgs/icon_pencil.svg",alt:"",height:"24px"})})})]})}),!(null==v?void 0:v.hideCafecitos)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:ei().countCoffees,children:[(0,n.jsx)("img",{src:"https://cdn.cafecito.app/imgs/cafecito_logo.svg",alt:"",width:"28px",height:"24px"}),(0,n.jsxs)("span",{children:["x ",S||0," recibidos"]})]}),(null==x?void 0:x.length)>0&&(0,n.jsxs)("div",{className:ei().countSubs,children:[(0,n.jsx)("img",{src:"https://cdn.cafecito.app/imgs/cafecito-lock.svg",alt:"",width:"27px"}),(0,n.jsxs)("span",{children:["x ",G||0," suscriptores"]})]})]})]})})},ec=e=>{let{user:o}=e;return{userSession:o}};var ed=(0,b.$j)(ec)(er),eu=t(4318),ep=t(6228),eh=t(2207),ef=t(3512),em=t.n(ef);let ev=e=>{let{topDonations:o}=e;return o.length?(0,n.jsx)("section",{className:em().topDonationsContainer,children:(0,n.jsxs)("div",{className:em().topDonationsWrapper,children:[(0,n.jsx)("header",{children:"Top Donadores"}),(0,n.jsxs)("ul",{children:[(0,n.jsxs)("li",{className:em().headerTable,children:[(0,n.jsx)("div",{className:em().headerPosition,children:"Posici\xf3n"}),(0,n.jsx)("div",{className:em().headerName,children:"Nombre"}),(0,n.jsx)("div",{className:em().headerCoffees,children:"Cafecitos"})]}),o.map((e,o)=>(0,n.jsxs)("li",{children:[(0,n.jsx)("div",{className:em().rank,children:(0,n.jsx)("span",{children:o+1})}),(0,n.jsx)("div",{className:em().name,children:e.name||"-"}),(0,n.jsx)("div",{className:em().count,children:e.countCoffees})]},o))]})]})}):null},e_=e=>{let{user:o}=e;return{userSession:o}};var eg=(0,b.$j)(e_)(ev),ex=t(3630),ej=t(1368),ew=t.n(ej),eC=t(178),eb=t.n(eC);L().extend(eb());let eN=()=>(0,n.jsx)(N.G,{className:ew().spinner,icon:y.LM3,width:"20"}),ey=e=>{var o,t;let{values:a}=e,{openModalThanks:l,setOpenModalThanks:i,user:s}=a;return(0,n.jsx)(eu.Z,{title:"\xa1Gracias!",openModal:l,nameModal:"openModal",openModalCreateEvent:e=>i(e),children:(null==s?void 0:null===(o=s.texts)||void 0===o?void 0:o.thanks)?null==s?void 0:null===(t=s.texts)||void 0===t?void 0:t.thanks:"Much\xedsimas gracias por el aporte!"})},ek=e=>{let{values:o}=e,{openModalPlanThanks:t,setOpenModalPlanThanks:a}=o;return(0,n.jsx)(eu.Z,{title:"\xa1Gracias!",openModal:t,nameModal:"openModal",openModalCreateEvent:e=>a(e),children:"\xa1Muchas gracias, plan comprado exitosamente!"})},eS=e=>{var o,t,l,i,s,r;let{values:c}=e,{openModalShare:d,setOpenModalShare:u,share:p,user:h}=c,[f,m]=(0,a.useState)("Copiar Link"),[v,_]=(0,a.useState)(!1),[g,x]=(0,a.useState)(!1);(0,a.useEffect)(()=>{_(!1),x(!1)},[d]);let j=()=>{var e;let o="".concat("https://cafecito.app","/").concat(h.username,"/c/").concat(null==p?void 0:null===(e=p.coffee)||void 0===e?void 0:e._id);return window.open("https://twitter.com/intent/tweet?text=".concat(o),"targetWindow","toolbar=no,location=0,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=250"),!1},w=()=>{var e;let o="".concat("https://cafecito.app","/").concat(h.username,"/c/").concat(null==p?void 0:null===(e=p.coffee)||void 0===e?void 0:e._id);if(void 0===navigator.clipboard){let e=document.createElement("textarea");e.value=o,e.style.position="fixed",document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),document.body.removeChild(e);return}navigator.clipboard.writeText(o),m("Link copiado")};(0,a.useEffect)(()=>{let e=async()=>{if(g){var e;_(!1);let o=await C("https://images.cafecito.app/api/coffee/".concat(null==p?void 0:null===(e=p.coffee)||void 0===e?void 0:e._id,"?orientation=portrait"));_(o)}};e()},[g]);let C=e=>fetch(e).then(e=>e.blob()).then(e=>URL.createObjectURL(e)),b=async(e,o)=>{let t=document.createElement("a");t.href=await C(e),t.download=o,document.body.appendChild(t),t.click(),document.body.removeChild(t)};return(0,n.jsxs)(eu.Z,{title:"Compartir",openModal:d,nameModal:"openModalShare",openModalCreateEvent:e=>u(e),children:[(0,n.jsxs)("div",{className:ew().q,style:{display:g?"none":"block"},children:[(0,n.jsxs)("div",{className:ew().name,children:[(null==p?void 0:null===(o=p.coffee)||void 0===o?void 0:o.name)||"",(0,n.jsx)("span",{children:" Te ".concat((null==p?void 0:null===(t=p.coffee)||void 0===t?void 0:t.name)?"compr\xf3":"compraron"," ").concat(null==p?void 0:null===(l=p.coffee)||void 0===l?void 0:l.countCoffees," ").concat((null==p?void 0:null===(i=p.coffee)||void 0===i?void 0:i.countCoffees)>1?"cafecitos":"cafecito")})]}),(null==p?void 0:null===(s=p.coffee)||void 0===s?void 0:s.message)&&(0,n.jsx)("span",{className:ew().text,children:null==p?void 0:null===(r=p.coffee)||void 0===r?void 0:r.message})]}),(0,n.jsx)("div",{className:ew().imgStory,style:{display:g?"block":"none"},children:v?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{className:ew().image,src:v,alt:""}),(0,n.jsx)("div",{children:"*Descargar imagen y subir a Instagram Story"}),(0,n.jsx)("button",{className:ew().buttonInstagram,onClick:()=>{b(v,"cafecito-donacion-story.png")},children:"Descargar imagen"})]}):(0,n.jsx)("div",{children:"Creando imagen..."})}),!g&&(0,n.jsxs)("div",{className:ew().buttonShare,children:[(0,n.jsxs)("button",{className:ew().buttonTwitter,onClick:()=>j(),children:[(0,n.jsx)(N.G,{icon:ea.mdU,width:"14"}),(0,n.jsx)("span",{children:"Twitter"})]}),(0,n.jsxs)("button",{className:ew().buttonInstagram,onClick:()=>{x(!0)},children:[(0,n.jsx)(N.G,{icon:ea.Zzi,width:"14"}),(0,n.jsx)("span",{children:"Instagram Story"})]}),(0,n.jsxs)("button",{className:ew().buttonCopy,onClick:()=>w(),children:[(0,n.jsx)(N.G,{icon:y.kZ_,width:"14"}),(0,n.jsx)("span",{children:f})]})]})]})},eG=e=>{let{user:o,plans:t,userAgent:l,query:i,userRedux:s,isAdult:r,hasGallery:d,hasPost:u,coffees:p,countCoffees:h,showThankYou:v=!1,showPlanThankYou:_=!1,coffeeData:x={},topDonations:j=[],objCoffee:w={},objPlanBuyer:C={}}=e;if(!o)return(0,n.jsx)(eh.Z,{});let b=(0,ex.Z)(l).phone,N=(0,a.useRef)(null),[y,k]=(0,a.useState)(!1),[S,G]=(0,a.useState)(h),[M,P]=(0,a.useState)(!1),[B,T]=(0,a.useState)(0),[D,A]=(0,a.useState)(p),[Z,I]=(0,a.useState)(x),[W,L]=(0,a.useState)(null!=x&&!!x.coffee),[O,F]=(0,a.useState)(!!v),[q,H]=(0,a.useState)(!!_),[R,V]=(0,a.useState)(!b),z=e=>{I({coffee:e,user:{name:o.name,image:o.image}}),L(!0)},K=e=>{let o=D.map(o=>(o._id==e._id&&(o=e),o));A(o)},U=async()=>{P(!0);let e=await m.Z.get("".concat("https://cafecito.app/api","/user/coffees/").concat(o._id,"/").concat(B+1),{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}}),t=D.concat(e.data),n=t.reduce((e,o)=>e+o.countCoffees,0);A(t),T(e=>e+1),P(!1),G(n)},X=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!R)return null;if(e){V(!1);return}let o=document.body,t=document.documentElement,n=Math.max(o.scrollHeight,o.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight),a=N.current.clientHeight;n-160<a+70&&V(!1)},J=async()=>{let e=async()=>{var e,t,n,a;let l=await navigator.serviceWorker.ready,i=await (null==l?void 0:null===(e=l.pushManager)||void 0===e?void 0:e.getSubscription());if(i)try{let e=await m.Z.post("".concat("https://cafecito.app/api","/check_subscription"),{sub:i},{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}});if(!(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.subscription)&&!(null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.err)){let e=await l.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:"BMoAMIOsia6Fiasp4u6rv81pokZAlZ-2so6tPtL2Jo7TWqeUCIAJnVnuHSwsO8oX72NqKz4ToT7LlXTdaakeIgw"});await o(e)}}catch(e){}else{let e=await (null==l?void 0:null===(t=l.pushManager)||void 0===t?void 0:t.subscribe({userVisibleOnly:!0,applicationServerKey:"BMoAMIOsia6Fiasp4u6rv81pokZAlZ-2so6tPtL2Jo7TWqeUCIAJnVnuHSwsO8oX72NqKz4ToT7LlXTdaakeIgw"}));await o(e)}},o=async e=>{m.Z.post("".concat("https://cafecito.app/api","/subscribe"),{sub:e},{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}})},t=async()=>{if("serviceWorker"in navigator)await navigator.serviceWorker.register("/sw.js"),await e();else{console.log("Service workers are not supported.");return}};"complete"===document.readyState?t():window.addEventListener("load",t)};return(0,a.useEffect)(()=>{X()},[]),(0,a.useEffect)(()=>{let e=(null==s?void 0:s.username)===(null==i?void 0:i.username);k(e),e&&J()},[s]),(0,a.useEffect)(()=>{A(p)},[p]),(0,a.useEffect)(()=>{if(null==window?void 0:window.gtag){var e;null==o||null===(e=o.categories)||void 0===e||e.forEach(e=>{window.gtag("event","PageLoad",{event_label:et[e],event_category:"Category"})}),window.gtag("event","PageLoad",{event_label:null==o?void 0:o.nsfw,event_category:"NSFW"})}},[o]),(0,a.useEffect)(()=>{if(v&&(null==window?void 0:window.gtag)){var e,t,n,a,l,i,s,r;let c=(null==w?void 0:null===(e=w.coffee)||void 0===e?void 0:e.price)*(null==w?void 0:null===(t=w.coffee)||void 0===t?void 0:t.countCoffees);window.gtag("event","purchase",{currency:"ARS",transaction_id:"C_".concat(null==w?void 0:null===(n=w.coffee)||void 0===n?void 0:n._id),value:c,items:[{coffeeId:null==w?void 0:null===(a=w.coffee)||void 0===a?void 0:a._id,userId:null==w?void 0:null===(l=w.user)||void 0===l?void 0:l._id,name:"Coffee Donation",price:null==w?void 0:null===(i=w.coffee)||void 0===i?void 0:i.price,countCoffees:null==w?void 0:null===(s=w.coffee)||void 0===s?void 0:s.countCoffees,totalPrice:c,type:"coffee",categories:o.categories||[],country:"AR",currency:"ARS",paymentSource:"MercadoPago"}]}),null==o||null===(r=o.categories)||void 0===r||r.forEach(e=>{window.gtag("event","Transfer",{event_label:et[e],event_category:"Category"})}),window.gtag("event","Transfer",{event_label:null==o?void 0:o.nsfw,event_category:"NSFW"})}},[v]),(0,a.useEffect)(()=>{if(_&&(null==window?void 0:window.gtag)){var e,t,n,a,l,i,s;let r=(null==C?void 0:null===(e=C.planBuyer)||void 0===e?void 0:e.price)*(null==C?void 0:null===(t=C.planBuyer)||void 0===t?void 0:t.months);window.gtag("event","purchase",{currency:"ARS",transaction_id:"P_".concat(null==C?void 0:null===(n=C.planBuyer)||void 0===n?void 0:n._id),value:r,items:[{planBuyerId:null==C?void 0:null===(a=C.planBuyer)||void 0===a?void 0:a._id,sellerId:null==o?void 0:o._id,name:"Plan Donation",price:null==C?void 0:null===(l=C.planBuyer)||void 0===l?void 0:l.price,months:null==C?void 0:null===(i=C.planBuyer)||void 0===i?void 0:i.months,totalPrice:r,type:"plan",categories:o.categories||[],country:"AR",currency:"ARS",paymentSource:"MercadoPago"}]}),null==o||null===(s=o.categories)||void 0===s||s.forEach(e=>{window.gtag("event","Transfer",{event_label:et[e],event_category:"Category"})}),window.gtag("event","Transfer",{event_label:null==o?void 0:o.nsfw,event_category:"NSFW"})}},[_]),(0,n.jsx)(f,{value:{user:o,isMobile:b,isUserEdit:y,userRedux:s,isAdult:r,hideButtonCoffee:!0,plans:t,hasGallery:d,hasPost:u,menuSelected:"home",footerMobile:R},children:(0,n.jsx)("div",{ref:N,children:(0,n.jsxs)(g,{children:[(0,n.jsx)(ep.Z,{user:o,share:Z}),(0,n.jsxs)("div",{className:ew().bodyContainer,children:[!b&&(0,n.jsxs)("section",{className:ew().leftSideContainer,children:[(0,n.jsx)(E,{user:o}),(0,n.jsx)(ed,{user:o,plans:t,handleShowMore:X}),(0,n.jsx)(eg,{topDonations:j})]}),(0,n.jsxs)("div",{className:ew().rightContainer,children:[(0,n.jsx)(c.Z,{isMobile:b,price:o.priceCoffee,username:null==i?void 0:i.username,user:o,handleShowMore:X,hasPlans:(null==t?void 0:t.length)>0}),b&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E,{user:o}),(0,n.jsx)(ed,{user:o,plans:t,handleShowMore:X}),(0,n.jsx)(eg,{topDonations:j})]}),(0,n.jsxs)("div",{className:ew().coffeesContainer,children:[D.map((e,o)=>(0,n.jsx)(Q,{setShare:z,isAdmin:y,coffee:e,changeCoffee:K},o)),(null==o?void 0:o.countCoffees)>0&&(null==o?void 0:o.countCoffees)>S&&(0,n.jsx)("button",{className:ew().loadMoreCoffee,onClick:U,disabled:M,children:M?(0,n.jsx)(eN,{}):"Cargar m\xe1s Cafecitos"})]})]})]}),(0,n.jsx)(ey,{values:{openModalThanks:O,setOpenModalThanks:F,user:o}}),(0,n.jsx)(ek,{values:{openModalPlanThanks:q,setOpenModalPlanThanks:H}}),(0,n.jsx)(eS,{values:{openModalShare:W,setOpenModalShare:L,user:o,share:Z}})]})})})},eM=e=>{let{user:o}=e;return{userRedux:o}};var eP=!0,eB=(0,b.$j)(eM)(eG)},8760:function(e){e.exports={coffeeContainer:"coffee_coffeeContainer__xV20f",coffee:"coffee_coffee__nOYG6",shareIcon:"coffee_shareIcon__uylHQ",q:"coffee_q__nVSG9",name:"coffee_name__QE1Vt",countCoffees:"coffee_countCoffees__0_EPX",countCoffeesWithoutName:"coffee_countCoffeesWithoutName__Rbe_g",text:"coffee_text__RIWQW",timeAgo:"coffee_timeAgo__mYNjB",answer:"coffee_answer__pEZFg",buttons:"coffee_buttons__nOqYh",dangerButton:"coffee_dangerButton__Ztv1h",greenButton:"coffee_greenButton__GuDq9",containerNameHeader:"coffee_containerNameHeader__rmnCA"}},1211:function(e){e.exports={footerContainer:"footer_footerContainer__lMAvm",leftSection:"footer_leftSection__NeY3Z",socialNetworksIcons:"footer_socialNetworksIcons__oqp6A",footerInBottom:"footer_footerInBottom__4aX39"}},7424:function(e){e.exports={goalContainer:"goal_goalContainer__bdWgo",spinner:"goal_spinner__iujE_",spin:"goal_spin__pzEEZ",goalWrapper:"goal_goalWrapper__6Avcz",setGoal:"goal_setGoal___EK_s",progressBar:"goal_progressBar__iS6D7",progressComplete:"goal_progressComplete__vvOnz",goalAmount:"goal_goalAmount__BzPSR",modalContainer:"goal_modalContainer__Lvwl5",modalWrapper:"goal_modalWrapper__4NAPW",groupInput:"goal_groupInput__twkm7",wrapperRadioButton:"goal_wrapperRadioButton__VMFW6",checkmark:"goal_checkmark__83guh",error:"goal_error__BT_59",showError:"goal_showError__wd6cK",wrapperButtons:"goal_wrapperButtons__SJ3Wy",groupButton:"goal_groupButton__L04EH",deleteButton:"goal_deleteButton__Jr31e",cancelButton:"goal_cancelButton__k8UDG",modalBackground:"goal_modalBackground__UpA2D"}},1243:function(e){e.exports={sendToProfile:"homeProfile_mainContainer_sendToProfile__xLf_B",blur:"homeProfile_mainContainer_blur__sBn3X"}},4048:function(e){e.exports={postContainer:"post_postContainer__Ay4s_",wrapperPost:"post_wrapperPost__usxOx",countCoffees:"post_countCoffees__Jwqyc",countSubs:"post_countSubs__hFbQN",socialNetworks:"post_socialNetworks__gySyN",categories:"post_categories__Hhk3V",editCategories:"post_editCategories__iBiwz",removeMarginTop:"post_removeMarginTop__bpDXH",titleDescription:"post_titleDescription__Ge8Kd",containerDescription:"post_containerDescription__KYZdX",shadowShowMore:"post_shadowShowMore__nPg8d",post:"post_post__blG85",showMore:"post_showMore__Qe5es"}},3512:function(e){e.exports={topDonationsContainer:"topDonations_topDonationsContainer__A6NWK",topDonationsWrapper:"topDonations_topDonationsWrapper__dGmAk",headerTable:"topDonations_headerTable__ckLU3",headerPosition:"topDonations_headerPosition__uH5YV",headerName:"topDonations_headerName__OtLZD",headerCoffees:"topDonations_headerCoffees__g_hKd",rank:"topDonations_rank___510S",name:"topDonations_name__NxGPD",count:"topDonations_count__ZsS1K"}},1368:function(e){e.exports={spinner:"homeProfile_spinner__xqQ4j",spin:"homeProfile_spin__ZbJIw",blur:"homeProfile_blur__jcoBd",title:"homeProfile_title__raEN4",titleDescription:"homeProfile_titleDescription__K1bMY",waitingCoffee:"homeProfile_waitingCoffee__9eVb4",q:"homeProfile_q__kzYnH",name:"homeProfile_name___c6Oi",text:"homeProfile_text__N76gE",imgStory:"homeProfile_imgStory__6OWiD",buttonInstagram:"homeProfile_buttonInstagram__2T6TU",buttonShare:"homeProfile_buttonShare__v_Z3Q",buttonTwitter:"homeProfile_buttonTwitter__AT0Fm",buttonCopy:"homeProfile_buttonCopy__WmoQa",loadMoreCoffee:"homeProfile_loadMoreCoffee__iVTmJ",bodyContainer:"homeProfile_bodyContainer__B_rAb",rightContainer:"homeProfile_rightContainer__sOvhm",leftSideContainer:"homeProfile_leftSideContainer__5wmFM"}}},function(e){e.O(0,[4976,7948,8764,7758,4193,5223,3787,4428,4942,2813,9944,9774,2888,179],function(){return e(e.s=9743)}),_N_E=e.O()}]);