(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5972],{3630:function(e,n,a){"use strict";a.d(n,{Z:function(){return j}});var t=/iPhone/i,r=/iPod/i,s=/iPad/i,i=/\biOS-universal(?:.+)Mac\b/i,l=/\bAndroid(?:.+)Mobile\b/i,o=/Android/i,c=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,p=/Silk/i,d=/Windows Phone/i,u=/\bWindows(?:.+)ARM\b/i,h=/BlackBerry/i,_=/BB10/i,m=/Opera Mini/i,x=/\b(CriOS|Chrome)(?:.+)Mobile/i,g=/Mobile(?:.+)Firefox\b/i,v=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream};function j(e){var n,a={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?a.userAgent=e:e&&e.userAgent&&(a={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):a={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var j=a.userAgent,f=j.split("[FBAN");void 0!==f[1]&&(j=f[0]),void 0!==(f=j.split("Twitter"))[1]&&(j=f[0]);var b=(n=j,function(e){return e.test(n)}),C={apple:{phone:b(t)&&!b(d),ipod:b(r),tablet:!b(t)&&(b(s)||v(a))&&!b(d),universal:b(i),device:(b(t)||b(r)||b(s)||b(i)||v(a))&&!b(d)},amazon:{phone:b(c),tablet:!b(c)&&b(p),device:b(c)||b(p)},android:{phone:!b(d)&&b(c)||!b(d)&&b(l),tablet:!b(d)&&!b(c)&&!b(l)&&(b(p)||b(o)),device:!b(d)&&(b(c)||b(p)||b(l)||b(o))||b(/\bokhttp\b/i)},windows:{phone:b(d),tablet:b(u),device:b(d)||b(u)},other:{blackberry:b(h),blackberry10:b(_),opera:b(m),firefox:b(g),chrome:b(x),device:b(h)||b(_)||b(m)||b(g)||b(x)},any:!1,phone:!1,tablet:!1};return C.any=C.apple.device||C.android.device||C.windows.device||C.other.device,C.phone=C.apple.phone||C.android.phone||C.windows.phone,C.tablet=C.apple.tablet||C.android.tablet||C.windows.tablet,C}},6111:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[username]/plans",function(){return a(6921)}])},6921:function(e,n,a){"use strict";a.r(n),a.d(n,{__N_SSP:function(){return D},default:function(){return X}});var t=a(5893),r=a(7294),s=a(6228),i=a(4942),l=a(5682);let o=r.createContext([]),c=o.Provider;var p=a(4318),d=a(4184),u=a.n(d),h=a(6154),_=a(7814),m=a(9417),x=a(4314),g=a.n(x);let v=(0,r.createContext)({}),j=e=>{let{children:n}=e,{plan:a}=(0,r.useContext)(o),[s,i]=(0,r.useState)({title:"",price:"",description:""}),[l,c]=(0,r.useState)({title:!1,price:!1,description:!1}),[p,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{a?i({title:null==a?void 0:a.title,description:null==a?void 0:a.description,price:null==a?void 0:a.price}):i({title:"",description:"",price:""})},[a]),(0,t.jsx)(v.Provider,{value:{plan:s,setPlan:i,loading:p,setLoading:d,dataPlan:a,dataPlanErr:l,setDataPlanErr:c,deletePlanModal:u,setDeletePlanModal:h},children:n})},f=e=>{let{name:n,title:a,placeholder:s,maxLength:i,type:l="text",err:o}=e,{plan:c,setPlan:p,dataPlanErr:d,setDataPlanErr:h}=(0,r.useContext)(v);return(0,t.jsxs)("section",{className:u()(g().groupInput,d[n]&&g().showError),children:[(0,t.jsx)("input",{type:l,id:n,name:n,placeholder:s||a,maxLength:i,onChange:e=>{p({...c,[n]:e.target.value}),h({...d,[n]:!1})},value:c[n]}),d[n]&&o&&(0,t.jsx)("span",{className:g().error,children:o})]})},b=()=>{let{plan:e,setPlan:n,dataPlanErr:a,setDataPlanErr:s}=(0,r.useContext)(v);return(0,t.jsxs)("section",{className:u()(g().groupInput,a.price&&g().showError),children:[(0,t.jsxs)("div",{className:g().groupInputPrice,children:[(0,t.jsx)("span",{className:g().currencyType,children:"AR$ por mes"}),(0,t.jsx)("input",{type:"number",id:"price",name:"price",placeholder:"100",onChange:t=>{n({...e,price:t.target.value}),s({...a,price:!1})},value:e.price})]}),(null==a?void 0:a.price)&&(0,t.jsx)("span",{className:g().error,children:"Debes ingresar un precio v\xe1lido"})]})},C=()=>{let{plan:e,setPlan:n,dataPlanErr:a,setDataPlanErr:s}=(0,r.useContext)(v);return(0,t.jsxs)("section",{className:u()(g().groupInput,a.description&&g().showError),children:[(0,t.jsx)("textarea",{id:"description",name:"description",placeholder:"Descripci\xf3n del plan (opcional)",maxLength:"2000",value:e.description,onChange:t=>{n({...e,description:t.target.value}),s({...a,description:!1})}}),a.description&&(0,t.jsx)("span",{className:g().error,children:"Un post debe tener un mensaje o una imagen."})]})},P=()=>{let{plan:e,loading:n,setLoading:a,dataPlan:s,dataPlanErr:i,setDataPlanErr:l,setDeletePlanModal:c}=(0,r.useContext)(v),{setShow:p,setPlan:d,reloadPlan:u}=(0,r.useContext)(o),x=async()=>{let n={};if(""===e.title&&(n.title=!0),""===e.price&&(n.price=!0),l({...i,...n}),!Object.keys(n).length){a(!0);let n={id:null==s?void 0:s._id,title:e.title,price:parseInt(e.price),description:e.description};try{let e=await h.Z.post("".concat("https://cafecito.app/api","/user/plan"),n,{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}});a(!1),p("none"),d({title:"",price:"",description:""}),u(e.data,!(null==s?void 0:s._id))}catch(e){}}};return(0,t.jsxs)("footer",{children:[(0,t.jsx)("button",{onClick:x,disabled:n,children:n?(0,t.jsx)(_.G,{className:g().spinner,icon:m.LM3,width:"20"}):(null==s?void 0:s._id)?"Guardar plan":"Crear plan"}),(0,t.jsx)("img",{className:g().deleteIcon,src:"https://cdn.cafecito.app/imgs/icon_trash.svg",alt:"",height:"24px",onClick:()=>{c(!0)}})]})},w=()=>{let{setPlan:e}=(0,r.useContext)(v),{setShow:n,setPlan:a}=(0,r.useContext)(o);return(0,t.jsxs)("header",{children:[(0,t.jsx)("h5",{children:"Crear plan"}),(0,t.jsx)("img",{src:"https://cdn.cafecito.app/imgs/icon_cross.svg",alt:"",width:"16px",height:"16px",onClick:()=>{e(!1),a(!1),n("none")}})]})},M=e=>{let{children:n}=e,{show:a}=(0,r.useContext)(o);return(0,t.jsx)("section",{className:g().modalContainer,style:{display:a},children:n})},y=()=>{let{deletePlanModal:e,setDeletePlanModal:n}=(0,r.useContext)(v),{plan:a,removePlan:s,setShow:i,setPlan:l}=(0,r.useContext)(o),c=async()=>{await h.Z.delete("".concat("https://cafecito.app/api","/user/plan/").concat(a._id),{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}}),n(!1),i(!1),l(!1),s(a)};return(0,t.jsx)(p.Z,{title:"\xbfEst\xe1s seguro que quieres borrar este plan?",openModal:e,openModalCreateEvent:()=>{n(!e)},color:"#ff6961",children:(0,t.jsxs)("div",{className:g().modalButtonsDeletePlan,children:[(0,t.jsx)("button",{className:g().cancel,onClick:()=>{n(!1)},children:"Cancelar"}),(0,t.jsx)("button",{className:g().success,onClick:c,children:"Borrar"})]})})},N=()=>(0,t.jsx)(j,{children:(0,t.jsxs)(M,{children:[(0,t.jsxs)("div",{className:g().modalWrapper,children:[(0,t.jsx)(w,{}),(0,t.jsx)(f,{name:"title",title:"T\xedtulo",maxLength:"80",err:"Debes ingresar un t\xedtulo"}),(0,t.jsx)(b,{}),(0,t.jsx)(C,{}),(0,t.jsx)(P,{})]}),(0,t.jsx)("div",{className:g().modalBackground}),(0,t.jsx)(y,{})]})});var S=a(8401),k=a(2021),T=a(5627),A=a(7125),I=a(2207),$=a(602),L=a(6064),W=a(3630),U=a(4230),E=a.n(U);let B=()=>{let{setShow:e}=(0,r.useContext)(o);return(0,t.jsx)("section",{className:E().addButton,children:(0,t.jsx)("img",{src:"https://cdn.cafecito.app/imgs/icon_add.svg",onClick:()=>e("block"),alt:""})})},Z=e=>{var n;let{plan:a,loadPlan:s}=e,[i,l]=(0,r.useState)(!1),c=(null==a?void 0:null===(n=a.description)||void 0===n?void 0:n.length)>=400,{isUserEdit:p,setShow:d,setShowBuyPlan:u,setSelectPlan:h,setShowRegisterPopup:_,userRedux:m}=(0,r.useContext)(o);return(0,t.jsxs)("article",{className:E().planWrapper,children:[(0,t.jsx)("h2",{children:a.title}),(0,t.jsxs)("div",{className:E().price,children:["AR$ ",a.price]}),(0,t.jsx)("div",{className:E().priceInfo,children:"pago \xfanico"}),(0,t.jsx)("div",{className:E().priceSecondInfo,children:"(no se renueva mensualmente)"}),(0,t.jsxs)("div",{className:E().countPosts,children:[(0,t.jsx)("span",{children:"Contenido del plan:"})," ","".concat(a.countPosts," ").concat(1===a.countPosts?"publicaci\xf3n":"publicaciones")]}),!p&&(0,t.jsx)("button",{onClick:()=>{p||(null==m?void 0:m._id)?(u(!0),h(a)):_(!0)},children:"Comprar plan"}),a.description&&(0,t.jsxs)("section",{className:E().description,style:{height:c&&!i?"200px":"auto"},children:[a.description,c&&!i&&(0,t.jsx)("div",{className:E().shadowShowMore})]}),a.description&&c&&!i&&(0,t.jsx)("div",{className:E().seeMore,onClick:()=>{l(!0)},children:"Ver m\xe1s"}),p&&(0,t.jsx)("div",{className:E().actionsWrapper,children:(0,t.jsx)("img",{className:E().editIcon,src:"https://cdn.cafecito.app/imgs/icon_pencil.svg",alt:"",height:"24px",onClick:()=>{s(a._id),d("block")}})})]})},O=e=>{let{user:n,plans:a,userAgent:o,query:p,userRedux:d,isAdult:_,hasGallery:m,hasPost:x}=e;if(!n)return(0,t.jsx)(I.Z,{});let g=(0,W.Z)(o).phone,v=(null==d?void 0:d.username)===(null==p?void 0:p.username),[j,f]=(0,r.useState)([...a]),[b,C]=(0,r.useState)("none"),[P,w]=(0,r.useState)(!1),[M,y]=(0,r.useState)(!_&&(null==d?void 0:d._id)!=n._id&&n.nsfw),[L,U]=(0,r.useState)(!1),[O,R]=(0,r.useState)(!1),[D,X]=(0,r.useState)(null),G=async e=>{let n=await h.Z.get("".concat("https://cafecito.app/api","/user/plan/").concat(e),{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}});w({...n.data})},F=async(e,n)=>{if(n){let n=[...j];n.unshift(e),f(n)}else f(n=>n.map(n=>(n._id==e._id&&(n={...e}),n)))},V=e=>{let n=j.filter(n=>{if(n._id!==e._id)return n});f(n)},q=(e,n)=>{"openModalAdultContent"==n&&h.Z.post("".concat("https://cafecito.app/api","/see_nsfw"),{},{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}}),y(!1)},K={plan:P,plans:a,setPlan:w,show:b,setShow:C,user:n,reloadPlan:F,removePlan:V,isUserEdit:v,planPage:!0,setShowBuyPlan:U,selectPlan:D,setSelectPlan:X,userRedux:d,setShowRegisterPopup:R};return(0,t.jsx)(c,{value:K,children:(0,t.jsxs)($.e,{value:K,children:[(0,t.jsxs)("div",{className:u()(M&&E().blur),children:[(0,t.jsx)(s.Z,{user:n,title:"Planes de ".concat(n.name," | Cafecito"),url:"".concat("https://cafecito.app","/").concat(n.username,"/plans")}),(0,t.jsx)(i.Z,{}),(0,t.jsx)(l.Z,{user:n,isUserEdit:v,userLogged:d}),(0,t.jsxs)("div",{className:E().plansWrapper,children:[(0,t.jsx)(S.Z,{menu:"plans",username:n.username,hide:{plans:(null==a?void 0:a.length)===0&&!v,gallery:!m&&!v,posts:!x&&!v}}),v&&(0,t.jsx)(B,{}),!v&&(0,t.jsx)(A.Z,{show:L,isMobile:g,username:p.username,user:n}),(0,t.jsx)("section",{className:E().plansContainer,children:j.map(e=>(0,t.jsx)(Z,{plan:e,username:n.username,loadPlan:G},e._id))})]}),(0,t.jsx)(N,{})]}),(0,t.jsx)(T.Z,{eventModal:R,openModal:O,redirect:"/".concat(n.username,"/plans"),userAgent:o}),(0,t.jsx)(k.Z,{openModal:M,nameModal:"openModalAdultContent",openModalCreateEvent:q})]})})},R=e=>{let{user:n}=e;return{userRedux:n}};var D=!0,X=(0,L.$j)(R)(O)},4314:function(e){e.exports={modalContainer:"createPlanModal_modalContainer__CHGV6",spinner:"createPlanModal_spinner__an_rS",spin:"createPlanModal_spin__y7t8g",modalWrapper:"createPlanModal_modalWrapper__J7gy_",groupInput:"createPlanModal_groupInput__Kczvv",error:"createPlanModal_error__XVYKA",groupInputPrice:"createPlanModal_groupInputPrice__FHsJ4",currencyType:"createPlanModal_currencyType__dnU20",showError:"createPlanModal_showError__NA7W8",containerImageUpload:"createPlanModal_containerImageUpload__8qD18",inputFile:"createPlanModal_inputFile__VcxUL",imageUpload:"createPlanModal_imageUpload__rWqXl",uploadImageIcon:"createPlanModal_uploadImageIcon__2w2gB",err:"createPlanModal_err__bGULw",modalBackground:"createPlanModal_modalBackground__C3Aav",modalButtonsDeletePlan:"createPlanModal_modalButtonsDeletePlan__AG37g",cancel:"createPlanModal_cancel__nQiKM",success:"createPlanModal_success__f4ufG"}},4230:function(e){e.exports={blur:"plans_blur__kZr36",plansWrapper:"plans_plansWrapper__lysde",plansContainer:"plans_plansContainer__kuP_X",planWrapper:"plans_planWrapper__PpfpH",countPosts:"plans_countPosts__ibs8D",price:"plans_price__DeLmv",priceInfo:"plans_priceInfo__NS6WV",priceSecondInfo:"plans_priceSecondInfo__sWsy6",image:"plans_image__M3kXO",description:"plans_description__KLdQz",shadowShowMore:"plans_shadowShowMore__vvxUC",actionsWrapper:"plans_actionsWrapper__69Age",seeMore:"plans_seeMore__0jr1Q",addButton:"plans_addButton__3XN_b",sendToProfile:"plans_sendToProfile__Rblhe"}},6525:function(e){e.exports=function(e,n){(n=n||{}).listUnicodeChar=!!n.hasOwnProperty("listUnicodeChar")&&n.listUnicodeChar,n.stripListLeaders=!n.hasOwnProperty("stripListLeaders")||n.stripListLeaders,n.gfm=!n.hasOwnProperty("gfm")||n.gfm,n.useImgAltText=!n.hasOwnProperty("useImgAltText")||n.useImgAltText,n.abbr=!!n.hasOwnProperty("abbr")&&n.abbr,n.replaceLinksWithURL=!!n.hasOwnProperty("replaceLinksWithURL")&&n.replaceLinksWithURL,n.htmlTagsToSkip=n.hasOwnProperty("htmlTagsToSkip")?n.htmlTagsToSkip:[];var a=e||"";a=a.replace(/^(-\s*?|\*\s*?|_\s*?){3,}\s*/gm,"");try{n.stripListLeaders&&(a=n.listUnicodeChar?a.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm,n.listUnicodeChar+" $1"):a.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm,"$1")),n.gfm&&(a=a.replace(/\n={2,}/g,"\n").replace(/~{3}.*\n/g,"").replace(/~~/g,"").replace(/`{3}.*\n/g,"")),n.abbr&&(a=a.replace(/\*\[.*\]:.*\n/,"")),a=a.replace(/<[^>]*>/g,"");var t=RegExp("<[^>]*>","g");if(n.htmlTagsToSkip.length>0){var r="(?!"+n.htmlTagsToSkip.join("|")+")";t=RegExp("<"+r+"[^>]*>","ig")}a=a.replace(t,"").replace(/^[=\-]{2,}\s*$/g,"").replace(/\[\^.+?\](\: .*?$)?/g,"").replace(/\s{0,2}\[.*?\]: .*?$/g,"").replace(/\!\[(.*?)\][\[\(].*?[\]\)]/g,n.useImgAltText?"$1":"").replace(/\[([^\]]*?)\][\[\(].*?[\]\)]/g,n.replaceLinksWithURL?"$2":"$1").replace(/^\s{0,3}>\s?/gm,"").replace(/^\s{1,2}\[(.*?)\]: (\S+)( ".*?")?\s*$/g,"").replace(/^(\n)?\s{0,}#{1,6}\s+| {0,}(\n)?\s{0,}#{0,} #{0,}(\n)?\s{0,}$/gm,"$1$2$3").replace(/([\*]+)(\S)(.*?\S)??\1/g,"$2$3").replace(/(^|\W)([_]+)(\S)(.*?\S)??\2($|\W)/g,"$1$3$4$5").replace(/(`{3,})(.*?)\1/gm,"$2").replace(/`(.+?)`/g,"$1").replace(/~(.*?)~/g,"$1")}catch(n){return console.error(n),e}return a}}},function(e){e.O(0,[4976,7948,8764,7758,4193,4942,2813,7125,9774,2888,179],function(){return e(e.s=6111)}),_N_E=e.O()}]);